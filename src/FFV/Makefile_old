###################################################################
#
# CAERU Library
#
# Copyright (c) All right reserved. 2012
#
# Institute of Industrial Science, The University of Tokyo, Japan. 
#
###################################################################

TARGET = ffv

RM = \rm -f

###################################################################

OMP_FLAGS=-openmp -openmp-report=2

CC=icc
CFLAGS=-O3
CXX=icpc
CXXFLAGS=-O3 $(OMP_FLAGS) -DTD_USE_NAMESPACE
FC=ifort
FCFLAGS=-O3
F90=ifort
F90FLAGS=-O3 -Warn unused -fpp $(OMP_FLAGS) -D_STATIC
LDFLAGS=-L/opt/intel/composerxe/lib
LIBS=-lifport -lifcore

UDEF_INC_PATH=-I../Cutlib-2.0.3/include \
              -I../Polylib_2_0_3/include \
              -I../PMlib-1.0/include \
              -I/usr/local/cpm_float/include \
              -I/opt/openmpi/include \
              -I/usr/local/textparser/include \
              -I../FB \
              -I../F_CBC \
              -I../IP

UDEF_LIB_PATH=-L../Polylib_2_0_3/lib \
              -L../Cutlib-2.0.3/lib \
              -L../PMlib-1.0/lib \
              -L/usr/local/cpm_float/lib \
              -L/opt/openmpi/lib \
              -L/usr/local/textparser/lib 

UDEF_LIBS = -lMPIPolylib -lcutlib -lpmlib -lcpmlib -lmpi -lTextParser

###################################################################

CSRCS = \


CXXSRCS = \
       main.C \
       ffv.C \
       ffv_Initialize.C \


FCSRCS = \


F90SRCS = \


SRCS  = $(CSRCS) $(CXXSRCS) $(FCSRCS) $(F90SRCS)

.SUFFIXES: .o .c .C .f .f90
COBJS = $(CSRCS:.c=.o)
CXXOBJS = $(CXXSRCS:.C=.o)
FCOBJS = $(FCSRCS:.f=.o)
F90OBJS = $(F90SRCS:.f90=.o)
OBJS  = $(COBJS) $(CXXOBJS) $(FCOBJS) $(F90OBJS)


###################################################################

$(TARGET):$(OBJS)
	$(CXX) $(CXXFLAGS) $(UDEF_INC_PATH) -o $(TARGET) $(OBJS) \
	$(LDFLAGS) $(UDEF_LIB_PATH) $(LIBS) $(UDEF_LIBS)
	mv $(TARGET) ../../bin/.

.c.o:
	$(CC) $(CFLAGS) $(UDEF_INC_PATH) -c $<

.C.o:
	$(CXX) $(CXXFLAGS) $(UDEF_INC_PATH) -c $<

.f.o:
	$(FC) $(FCFLAGS) $(UDEF_INC_PATH) -c $<

.f90.o:
	$(F90) $(F90FLAGS) $(UDEF_INC_PATH) -c $<

clean:
	$(RM) $(OBJS)
  
#	(cd CBC; make clean)
#	(cd IP; make clean)
#	(cd FB; make clean)
#	(cd app; make clean)

allclean: clean
	(cd ../../bin; $(RM) $(TARGET) )
  
depend:
	makedepend -I. -Y $(CXXSRCS) $(CSRCS)

# DO NOT DELETE

main.o: ffv.h ../FB/FB_Define.h ../FB/mydebug.h ffv_Define.h
ffv.o: ffv.h ../FB/FB_Define.h ../FB/mydebug.h ffv_Define.h
ffv_Initialize.o: ffv.h ../FB/FB_Define.h ../FB/mydebug.h ffv_Define.h
